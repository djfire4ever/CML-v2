<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>4x2 Gallery Modal Test</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
/* ===== Modal Grid ===== */
.gallery-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 1rem;
}

/* ===== Each Slot ===== */
.gallery-slot {
  position: relative;
  height: 250px;
  width: 100%;
  background: black;
  border: 3px solid #0d6efd;
  border-radius: 0.5rem;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Image container */
.slot-image-container {
  width: 240px;
  height: 240px;
  border-radius: 0.5rem;
  overflow: hidden;
  position: relative;
}

.slot-image-container img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Buttons over image top-right */
.slot-buttons {
  position: absolute;
  top: 0.25rem;
  right: 0.25rem;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  background: rgba(0,0,0,0.6);
  padding: 0.25rem;
  border-radius: 0.25rem;
  z-index: 10;
}

/* Caption input / badge */
.slot-caption {
  position: absolute;
  bottom: 0.25rem;
  left: 0.25rem;
  right: 0.25rem;
  z-index: 10;
  background: rgba(0,0,0,0.6);
  border-radius: 0.25rem;
  padding: 0.25rem;
  text-align: center;
}

.slot-caption input {
  width: 100%;
  border: none;
  background: transparent;
  color: #f8f9fa;
  font-size: 0.85rem;
  outline: none;
}

/* Hover effect */
.gallery-slot:hover {
  border-color: #198754;
  background-color: #2a2a2a;
}
</style>
</head>
<body class="p-4">

<!-- Launch Modal Button -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#galleryModal">
  Open Gallery
</button>

<!-- Modal -->
<div class="modal fade" id="galleryModal" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">4x2 Gallery Modal</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <div class="gallery-grid" id="galleryGrid"></div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Save Changes</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Sample gallery data
const galleryData = [
  { url: "https://picsum.photos/240", caption: "Thumbnail" },
  { url: "https://picsum.photos/240?text=1", caption: "Caption 1" },
  { url: "https://picsum.photos/240?text=2", caption: "Caption 2" },
  { url: "https://picsum.photos/240?text=3", caption: "Caption 3" },
  { url: "https://picsum.photos/240?text=4", caption: "Caption 4" },
  { url: "https://picsum.photos/240?text=5", caption: "Caption 5" },
  { url: "https://picsum.photos/240?text=6", caption: "Caption 6" },
  { url: "https://picsum.photos/240?text=7", caption: "Caption 7" }
];

const galleryGrid = document.getElementById("galleryGrid");

function renderSlot(slotData, index) {
  const slot = document.createElement("div");
  slot.className = "gallery-slot";

  // Image container
  const imgContainer = document.createElement("div");
  imgContainer.className = "slot-image-container";

  const img = document.createElement("img");
  img.src = slotData?.url || "https://via.placeholder.com/240";
  img.alt = index === 0 ? "Thumbnail" : `Image ${index}`;
  imgContainer.appendChild(img);

  slot.appendChild(imgContainer);

  // Buttons for non-thumbnail
  if (index !== 0) {
    const btns = document.createElement("div");
    btns.className = "slot-buttons";

    const setMainBtn = document.createElement("button");
    setMainBtn.type = "button";
    setMainBtn.className = "btn btn-sm btn-outline-warning";
    setMainBtn.textContent = "â­";
    btns.appendChild(setMainBtn);

    const delBtn = document.createElement("button");
    delBtn.type = "button";
    delBtn.className = "btn btn-sm btn-outline-danger";
    delBtn.textContent = "ðŸ—‘";
    btns.appendChild(delBtn);

    imgContainer.appendChild(btns);
  }

  // Caption / badge
  const captionWrapper = document.createElement("div");
  captionWrapper.className = "slot-caption";

  if (index === 0) {
    const badge = document.createElement("span");
    badge.textContent = "ðŸ“Œ Thumbnail";
    badge.style.color = "#f8f9fa";
    badge.style.fontWeight = "bold";
    captionWrapper.appendChild(badge);
  } else {
    const input = document.createElement("input");
    input.type = "text";
    input.placeholder = "Caption...";
    input.value = slotData?.caption || "";
    captionWrapper.appendChild(input);
  }

  slot.appendChild(captionWrapper);

  galleryGrid.appendChild(slot);
}

// Render all slots
galleryData.forEach((slot, idx) => renderSlot(slot, idx));
</script>
</body>
</html>
